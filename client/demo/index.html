<html>
<head>
    <title>Demo page of the widget</title>
</head>
<body>

    <script type="application/json" name="widgetDefinition">
      {
        "widgetDefinition": {
                "width": 500,
                "height": 400,
                "start": "-PT1H",
                "end": "PT0H",
                "view": "timeSeries",
                "stacked": false,
                "metrics": [
                    [
                       "AWS/EC2",
                       "CPUUtilization",
                       "InstanceId",
                       "i-063a0b76d59f45bef"
                    ]
                 ],
                 "stat": "Average",
                 "yAxis": {
                        "left": {
                            "min": 0,
                            "max": 0.3
                        }
                 },
                 "period": 60,
                 "title": "CPUUtilization: Instance a: Acct A"        
        }
    }
    </script>

    <script type="application/json" name="widgetDefinition">
      {
        "widgetDefinition": {
                "width": 500,
                "height": 400,
                "start": "-PT1H",
                "end": "PT0H",
                "view": "timeSeries",
                "stacked": false,
                "metrics": [
                    [
                       "AWS/EC2",
                       "CPUUtilization",
                       "InstanceId",
                       "i-063a0b76d59f45bef"
                    ]
                 ],
                 "stat": "Average",
                 "yAxis": {
                        "left": {
                            "min": 0,
                            "max": 0.3
                        }
                 },
                 "period": 60,
                 "title": "CPUUtilization: Instance b: Acct A"      
        }
    }
    </script>

     <script type="application/json" name="widgetDefinition">
     {
        "widgetDefinition": {
                "width": 500,
                "height": 400,
                "start": "-PT1H",
                "end": "PT0H",
                "view": "timeSeries",
                "stacked": false,
                "metrics": [
                    [
                       "AWS/EC2",
                       "CPUUtilization",
                       "InstanceId",
                       "i-063a0b76d59f45bef"
                    ]
                 ],
                 "stat": "Average",
                 "yAxis": {
                        "left": {
                            "min": 0,
                            "max": 0.3
                        }
                 },
                 "period": 60,
                 "title": "CPUUtilization: Instance c: Acct B"    
        }
    }
    </script>

    <script>
        var list = [] ;
        var widgets = document.getElementsByName('widgetDefinition');
        widgets.forEach((val, key, arr) => { 
            list.push(JSON.parse(val.innerHTML)) ; 
        });

        (function (w,d,s,o,f,js,fjs) {
            w['CW-Widget']=o;w[o] = w[o] || function () { (w[o].q = w[o].q || []).push(arguments) };
            js = d.createElement(s), fjs = d.getElementsByTagName(s)[0];
            js.id = o; js.src = f; js.async = 1; fjs.parentNode.insertBefore(js, fjs);
        }(window, document, 'script', 'cw', './widget.js'));
        cw('widget', { url: 'https://s6gw9k12gj.execute-api.ap-northeast-2.amazonaws.com/LATEST/graph',
                       api_key: 'sWIQq3nCGY1J7AlIsI3oi4Q59OvJRm5dikg1nQMh', 
                       widget : list
                     });
    </script>
</body>
</html>

